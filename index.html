<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Holy Scripture Sanctuary — Night Mode + Bible Reader Edition</title>

<style>

/* ============================================================
   GLOBAL DAY MODE THEME (Default)
============================================================ */
body {
  margin: 0;
  background: #f5ecd4;
  font-family: Georgia, serif;
  color: #4a3205;
  overflow-x: hidden;
  text-align: center;
  transition: background 0.6s, color 0.6s;
  padding-bottom: 130px;
}

/* ============================================================
   MIDNIGHT HEAVEN NIGHT MODE
============================================================ */
body.night {
  background: #0b1226; /* deep midnight blue */
  color: #f5eac1; /* soft gold */
}

body.night .section {
  background: #111a33;
  border-color: #d5b14c;
  box-shadow: 0 0 20px rgba(255,215,130,0.25);
}

body.night h1,
body.night h2 {
  color: #f7d97f;
  text-shadow: 0 0 8px rgba(255,220,120,0.6);
}

body.night .musicBtn {
  background: linear-gradient(to bottom, #2a3355, #1b2238);
  color: #f7d97f;
  border-color: #c49f4a;
}

body.night .musicControlBtn {
  background: #2e3860;
  border-color: #c9a650;
  color: #f7d97f;
}

body.night #musicBar {
  background: linear-gradient(to bottom, #1d2540, #141b2f);
  border-top-color: #d1ae53;
}

body.night input,
body.night textarea {
  background: #243055;
  color: #f7e9b8;
  border: 1px solid #a88437;
}

/* ============================================================
   NIGHT MODE TOGGLE BUTTON
============================================================ */
#nightToggle {
  position: fixed;
  top: 15px;
  right: 15px;
  background: #e7c97b;
  border: 2px solid #a38336;
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
  z-index: 9999;
}

body.night #nightToggle {
  background: #2b365e;
  border-color: #c6a449;
  color: #f7d97f;
}

/* ============================================================
   FULLSCREEN BIBLE READER (AUTO-SCROLL READY)
============================================================ */
#bibleReaderOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(5, 10, 25, 0.88);
  backdrop-filter: blur(6px);
  color: #f5eac1;
  z-index: 9998;
  display: none;
  flex-direction: column;
  padding: 20px;
}

#bibleReaderBox {
  flex-grow: 1;
  overflow-y: scroll;
  padding: 25px;
  font-size: 20px;
  line-height: 1.6;
  border: 2px solid #d1af56;
  background: rgba(15,20,40,0.7);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255,210,140,0.35);
}

#bibleReaderControls {
  margin-top: 15px;
  display: flex;
  gap: 12px;
  justify-content: center;
}

.readerBtn {
  background: #e7c97b;
  border: 2px solid #a38336;
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
}

body.night .readerBtn {
  background: #2b365e;
  border-color: #c6a449;
  color: #f7d97f;
}

/* ============================================================
   PERMANENT MUSIC BAR
============================================================ */
#musicBar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: linear-gradient(to bottom, #fff0c2, #e4c173);
  border-top: 2px solid #c79f44;
  padding: 10px;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.25);
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 9997;
}

#currentSong {
  font-weight: bold;
  color: #4b350d;
  margin-bottom: 6px;
}

#musicControls {
  display: flex;
  gap: 12px;
  margin-bottom: 8px;
}

.musicControlBtn {
  padding: 8px 14px;
  background: #e8cd86;
  border: 2px solid #a0833f;
  border-radius: 8px;
}

#progressContainer,
#volumeContainer {
  width: 90%;
}

#musicProgress,
#volumeSlider {
  width: 100%;
}

/* ============================================================
   GENERAL SECTION STYLE
============================================================ */
.section {
  margin: 25px auto;
  padding: 25px;
  max-width: 900px;
  background: #fff7e1;
  border: 2px solid #d3a84e;
  border-radius: 12px;
}

/* ============================================================
   PLAYLIST BUTTON (Enhanced)
============================================================ */
.musicBtn {
  display: block;
  width: 85%;
  margin: 12px auto;
  padding: 14px;
  background: linear-gradient(to bottom, #f8e3a4, #e1c16b);
  border: 2px solid #a0833f;
  border-radius: 12px;
  font-size: 18px;
  cursor: pointer;
  color: #543b0c;
  font-weight: bold;
}

</style>
</head>

<body>

<!-- NIGHT MODE TOGGLE BUTTON -->
<button id="nightToggle" onclick="toggleNightMode()">Night Mode</button>

<!-- FULLSCREEN BIBLE READER -->
<div id="bibleReaderOverlay">
  <div id="bibleReaderBox"></div>

  <div id="bibleReaderControls">
    <button class="readerBtn" onclick="closeBibleReader()">Close</button>
    <button class="readerBtn" onclick="toggleScroll()">Start Auto‑Scroll</button>
    <button class="readerBtn" onclick="scrollFaster()">Faster</button>
    <button class="readerBtn" onclick="scrollSlower()">Slower</button>
  </div>
</div>

<!-- MUSIC BAR -->
<div id="musicBar">
  <div id="currentSong">No song playing</div>

  <div id="musicControls">
    <button class="musicControlBtn" onclick="togglePlayPause()">Play/Pause</button>
    <button class="musicControlBtn" onclick="stopMusic()">Stop</button>
  </div>

  <div id="progressContainer">
    <input type="range" id="musicProgress" value="0" min="0" max="100">
  </div>

  <div id="volumeContainer">
    <input type="range" id="volumeSlider" value="1" min="0" max="1" step="0.01">
  </div>
</div>

<audio id="musicPlayer"></audio>

<h1>Holy Scripture Sanctuary</h1>

<!-- BIBLE READER BUTTON -->
<div class="section">
  <h2>Read the Holy Bible (KJV)</h2>
  <select id="bibleBook">
    <option value="Genesis1">Genesis 1</option>
  </select>
  <br><br>
  <button class="musicBtn" onclick="openBibleReader()">Open Bible Reader</button>
</div>

<!-- PLAYLIST SECTION -->
<div class="section">
  <h2>Worship Music Playlist</h2>
  <button class="musicBtn" onclick="playSong('gospel')">Use This Gospel</button>
  <button class="musicBtn" onclick="playSong('holy')">Holy Forever</button>
</div>

<!-- Psalm of the Day -->
<div class="section">
  <h2>Psalm of the Day</h2>
  <button id="psalmBtn">Reveal Psalm</button>
  <div id="psalmOut"></div>
</div>

<!-- Confession -->
<div class="section">
  <h2>Confession & Healing</h2>
  <textarea id="confText" placeholder="Confess to God..."></textarea><br><br>
  <select id="confMood">
    <option>Broken</option>
    <option>Guilty</option>
    <option>Anxious</option>
    <option>Ashamed</option>
    <option>Tired</option>
    <option>Confused</option>
  </select><br><br>
  <button id="confBtn">Submit Confession</button>
  <div id="confOutput"></div>
</div>

<!-- God Speaks -->
<div class="section">
  <h2>God Speaks To Me</h2>
  <button id="speakBtn">Speak, Lord</button>
  <div id="speakOut"></div>
</div>

<!-- Encouragement -->
<div class="section">
  <h2>Encouragement</h2>
  <button id="encBtn">Encourage Me</button>
  <div id="encOut"></div>
</div>

<!-- Prayer -->
<div class="section">
  <h2>Prayer Request</h2>
  <textarea id="prayText" placeholder="Your prayer request..."></textarea><br><br>
  <button id="prayBtn">Submit</button>
  <div id="prayOut"></div>
</div>

<!-- Bible Plan -->
<div class="section">
  <h2>365‑Day Bible Plan</h2>
  <button id="biblePlanBtn">Today's Reading</button>
  <div id="biblePlanOut"></div>
</div>

<!-- Streak -->
<div class="section">
  <h2>Daily Worship Streak</h2>
  <button id="markDayBtn">Mark Today Complete</button>
  <div id="streakOut">0-Day Streak</div>
</div>

<!-- Carousel -->
<div class="section carouselContainer">
  <h2>Prayer Counters</h2>

  <div class="carousels" id="prayerCarousel">

    <div class="slide">
      <h3>Jesus Prayer</h3>
      <button id="jpPlus">+1</button>
      <button id="jpReset">Reset</button>
      <div id="jpCount">0</div>
    </div>

    <div class="slide">
      <h3>Scripture Prayer</h3>
      <input id="spVerse" placeholder="Your scripture line..."><br><br>
      <button id="spPlus">+1</button>
      <button id="spReset">Reset</button>
      <div id="spCount">0</div>
    </div>

    <div class="slide">
      <h3>Blessing Counter</h3>
      <button id="blPray">I Prayed</button>
      <button id="blForgive">I Forgave</button>
      <button id="blEnc">I Encouraged</button>
      <div id="blCount">0</div>
    </div>

    <div class="slide">
      <h3>Custom Prayer</h3>
      <input id="cpText" placeholder="Your prayer..."><br><br>
      <button id="cpPlus">+1</button>
      <button id="cpReset">Reset</button>
      <div id="cpCount">0</div>
    </div>

  </div>

  <button class="carouselArrow" id="prevSlide">◀</button>
  <button class="carouselArrow" id="nextSlide">▶</button>
</div>

<script>

/* =======================================================
   DATA SETS (FIXED — REQUIRED FOR FUNCTIONALITY)
======================================================= */
const verses = [
  {ref:"John 3:16", text:"For God so loved the world that He gave His only begotten Son."},
  {ref:"Psalm 23:1", text:"The Lord is my shepherd; I shall not want."},
  {ref:"Isaiah 41:10", text:"Fear thou not; for I am with thee."},
  {ref:"Romans 8:28", text:"All things work together for good to them that love God."}
];

const devotionals = [
  "God walks with you even now.",
  "Lay your worries in His hands.",
  "Peace flows from Christ alone.",
  "His mercy is new this morning."
];

const psalms = [
  "Psalm 23 — The Lord is my Shepherd.",
  "Psalm 91 — He that dwelleth in the secret place of the Most High.",
  "Psalm 121 — I will lift up mine eyes unto the hills."
];

const encouragements = [
  "God is strengthening you.",
  "You are loved by the Father.",
  "The Holy Spirit comforts you.",
  "Christ goes before you today."
];

const biblePlan = [
  "Genesis 1–3",
  "Matthew 1–3",
  "Psalm 1",
  "Proverbs 1",
  "John 1",
  "Romans 1",
  "Acts 1"
];

/* =======================================================
   MUSIC LOGIC
======================================================= */

const musicPlayer = document.getElementById("musicPlayer");
const currentSongLabel = document.getElementById("currentSong");
const progressBar = document.getElementById("musicProgress");
const volumeSlider = document.getElementById("volumeSlider");

const songs = {
  gospel: {
    title: "Use This Gospel",
    url: "https://files.catbox.moe/frtvpr.mp3"
  },
  holy: {
    title: "Holy Forever",
    url: "https://files.catbox.moe/q0n9yh.mp3"
  }
};

function playSong(which) {
  musicPlayer.src = songs[which].url;
  currentSongLabel.innerText = songs[which].title;
  musicPlayer.play();
}

function togglePlayPause() {
  if (musicPlayer.paused) musicPlayer.play();
  else musicPlayer.pause();
}

function stopMusic() {
  musicPlayer.pause();
  musicPlayer.currentTime = 0;
}

musicPlayer.ontimeupdate = () => {
  if (musicPlayer.duration) {
    progressBar.value =
      (musicPlayer.currentTime / musicPlayer.duration) * 100;
  }
};

progressBar.oninput = () => {
  musicPlayer.currentTime =
    (progressBar.value / 100) * musicPlayer.duration;
};

volumeSlider.oninput = () => {
  musicPlayer.volume = volumeSlider.value;
};

/* =======================================================
   NIGHT MODE
======================================================= */
function toggleNightMode() {
  document.body.classList.toggle("night");
}

/* =======================================================
   SCRIPTURE SEARCH
======================================================= */
document.getElementById("searchBox")?.addEventListener("input", function() {
  const q = this.value.toLowerCase();
  const out = document.getElementById("searchResults");
  out.innerHTML = "";

  verses.forEach(v => {
    if (v.text.toLowerCase().includes(q)) {
      out.innerHTML += `<b>${v.ref}</b>: ${v.text}<br><br>`;
    }
  });
});

/* =======================================================
   DEVOTIONAL
======================================================= */
document.getElementById("genDevo")?.addEventListener("click", () => {
  document.getElementById("devoOut").innerText =
    devotionals[Math.floor(Math.random() * devotionals.length)];
});

/* =======================================================
   PSALM OF THE DAY
======================================================= */
document.getElementById("psalmBtn").onclick = () => {
  const d = new Date().getDate();
  document.getElementById("psalmOut").innerText =
    psalms[d % psalms.length];
};

/* =======================================================
   GOD SPEAKS
======================================================= */
document.getElementById("speakBtn").onclick = () => {
  const v = verses[Math.floor(Math.random() * verses.length)];
  document.getElementById("speakOut").innerText =
    `${v.ref}: ${v.text}`;
};

/* =======================================================
   ENCOURAGEMENT
======================================================= */
document.getElementById("encBtn").onclick = () => {
  document.getElementById("encOut").innerText =
    encouragements[Math.floor(Math.random() * encouragements.length)];
};

/* =======================================================
   PRAYER REQUEST
======================================================= */
document.getElementById("prayBtn").onclick = () => {
  const val = document.getElementById("prayText").value.trim();
  document.getElementById("prayOut").innerText =
    val ? "Your prayer has been lifted." : "Please write a prayer.";
  document.getElementById("prayText").value = "";
};

/* =======================================================
   CONFESSION + HEALING OVERLAY
======================================================= */
document.getElementById("confBtn").onclick = () => {
  const mood = document.getElementById("confMood").value;
  const txt = document.getElementById("confText").value.trim();

  if (!txt) {
    alert("Write your confession.");
    return;
  }

  document.getElementById("confOutput").innerHTML = `
    <b>You are forgiven in Christ.</b><br><br>
    <b>Mood:</b> ${mood}<br><br>
    God draws near to those who seek Him.
  `;

  const overlay = document.getElementById("healingOverlay");
  overlay.style.display = "flex";
  overlay.style.opacity = 1;

  setTimeout(() => {
    overlay.style.transition = "opacity 2s";
    overlay.style.opacity = 0;
    setTimeout(() => {
      overlay.style.display = "none";
      overlay.style.transition = "";
    }, 2000);
  }, 1800);

  document.getElementById("confText").value = "";
};

/* =======================================================
   BIBLE PLAN
======================================================= */
document.getElementById("biblePlanBtn").onclick = () => {
  const day = new Date().getDay();
  document.getElementById("biblePlanOut").innerText =
    biblePlan[day % biblePlan.length];
};

/* =======================================================
   STREAK TRACKER
======================================================= */
let streak = parseInt(localStorage.getItem("worshipStreak") || "0");
let lastDay = localStorage.getItem("lastWorshipDay") || null;

document.getElementById("streakOut").innerText =
  streak + "-Day Streak";

document.getElementById("markDayBtn").onclick = () => {
  const today = new Date().toDateString();

  if (lastDay === today) {
    alert("Already marked.");
    return;
  }

  if (lastDay) {
    const diff =
      (new Date(today) - new Date(lastDay)) / (1000 * 60 * 60 * 24);
    streak = diff === 1 ? streak + 1 : 1;
  } else {
    streak = 1;
  }

  lastDay = today;
  localStorage.setItem("worshipStreak", streak);
  localStorage.setItem("lastWorshipDay", today);

  document.getElementById("streakOut").innerText =
    streak + "-Day Streak";
};

/* =======================================================
   COUNTERS
======================================================= */
let jp = 0, sp = 0, bl = 0, cp = 0;

document.getElementById("jpPlus").onclick = () => {
  jp++; document.getElementById("jpCount").innerText = jp;
};
document.getElementById("jpReset").onclick = () => {
  jp = 0; document.getElementById("jpCount").innerText = jp;
};

document.getElementById("spPlus").onclick = () => {
  sp++; document.getElementById("spCount").innerText = sp;
};
document.getElementById("spReset").onclick = () => {
  sp = 0; document.getElementById("spCount").innerText = sp;
};

document.getElementById("blPray").onclick =
document.getElementById("blForgive").onclick =
document.getElementById("blEnc").onclick = () => {
  bl++; document.getElementById("blCount").innerText = bl;
};

document.getElementById("cpPlus").onclick = () => {
  cp++; document.getElementById("cpCount").innerText = cp;
};
document.getElementById("cpReset").onclick = () => {
  cp = 0; document.getElementById("cpCount").innerText = cp;
};

/* =======================================================
   CAROUSEL
======================================================= */
let slideIndex = 0;
const slides = document.querySelectorAll(".slide");

function showSlide(i) {
  slides.forEach((s, idx) => {
    s.style.display = idx === i ? "block" : "none";
  });
}
document.getElementById("prevSlide").onclick = () => {
  slideIndex = (slideIndex - 1 + slides.length) % slides.length;
  showSlide(slideIndex);
};
document.getElementById("nextSlide").onclick = () => {
  slideIndex = (slideIndex + 1) % slides.length;
  showSlide(slideIndex);
};
showSlide(0);

/* =======================================================
   FULLSCREEN BIBLE READER (KJV)
======================================================= */
const bibleText = {
  Genesis1: `
<b>Genesis 1 (KJV)</b><br><br>
1 In the beginning God created the heaven and the earth.<br><br>
2 And the earth was without form, and void; and darkness was upon the face of the deep...<br><br>
3 And God said, Let there be light: and there was light.<br><br>
(You may add full text later.)
`
};

function openBibleReader() {
  const book = document.getElementById("bibleBook").value;
  document.getElementById("bibleReaderBox").innerHTML = bibleText[book];
  document.getElementById("bibleReaderOverlay").style.display = "flex";
}

function closeBibleReader() {
  document.getElementById("bibleReaderOverlay").style.display = "none";
  stopAutoScroll();
}

let scrollSpeed = 1;
let scrollInterval = null;

function toggleScroll() {
  if (scrollInterval) stopAutoScroll();
  else startAutoScroll();
}

function startAutoScroll() {
  scrollInterval = setInterval(() => {
    const box = document.getElementById("bibleReaderBox");
    box.scrollTop += scrollSpeed;
  }, 60);
}

function stopAutoScroll() {
  clearInterval(scrollInterval);
  scrollInterval = null;
}

function scrollFaster() { scrollSpeed += 0.5; }
function scrollSlower() { scrollSpeed = Math.max(0.5, scrollSpeed - 0.5); }

</script>
</body>
</html>
